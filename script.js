document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("leadForm"),e=document.getElementById("email"),n=document.getElementById("nombre"),a=document.getElementById("telefono"),i=document.getElementById("tipoCliente"),o=document.getElementById("municipio"),r=document.getElementById("servicio"),d=document.getElementById("metros"),l=document.getElementById("acabado"),c=document.getElementById("presupuesto"),s=document.getElementById("presupuestoLabel"),u=document.getElementById("preferencia"),m=document.getElementById("aceptaGuia"),p=document.getElementById("formMsg"),g=document.getElementById("progressive-1"),h=document.getElementById("progressive-2"),f=document.getElementById("ctaCotizar"),y=document.getElementById("ctaGuia"),b=document.getElementById("whatsappTop"),v=document.getElementById("whatsappFooter"),w=document.getElementById("downloadGuideFooter");function L(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function A(){var t=parseInt(c.value||"0",10);s.textContent="MXN "+t.toLocaleString("es-MX")}function S(){if(L(e.value)&&i.value)g.classList.remove("hidden");if(o.value&&r.value)h.classList.remove("hidden")}function O(){var t="Hola, quiero cotizar "+(r.value||"un proyecto")+" en "+(o.value||"Monterrey")+". Metros: "+(d.value||"-")+", acabado: "+(l.value||"-")+". Presupuesto: "+(c.value?"MXN "+parseInt(c.value,10).toLocaleString("es-MX"):"-")+". Preferencia: "+(u.value||"Email")+". Mi nombre: "+(n.value||"-")+". Email: "+(e.value||"-");var s="https://wa.me/528182600000?text="+encodeURIComponent(t);window.open(s,"_blank")}function C(){var t=window.jspdf.jsPDF,e=new t();e.setFontSize(18);e.text("Guía de Acabados de Acero Inoxidable",20,30);e.setFontSize(12);e.text("Aplicaciones típicas en Monterrey y área metropolitana",20,45);e.text("Fachadas: paneles 304 satinado, fijación oculta, pliegues controlados",20,60);e.text("Cocinas: cubiertas 304, soldadura TIG, remates anti-huellas",20,75);e.text("Barandales: 316, anclaje químico, norma de altura",20,90);e.text("Industrial: racks y estructuras, trazado CNC",20,105);e.text("Acabados: satinado, espejo, granallado; material 304/316",20,120);e.text("Contacto: 81 8260 0000 | Monterrey, N.L.",20,135);e.save("guia-acabados-acero-inoxidable.pdf")}function E(){p.textContent=""}function x(t){t.classList.add("opacity-100");t.classList.add("translate-y-0")}var T=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting)x(t.target)})},{threshold:.12});Array.prototype.forEach.call(document.querySelectorAll("[data-animate]"),function(t){T.observe(t)});c.addEventListener("input",A);A();e.addEventListener("input",S);i.addEventListener("change",S);o.addEventListener("change",S);r.addEventListener("change",S);d.addEventListener("input",S);l.addEventListener("change",S);u.addEventListener("change",S);f.addEventListener("click",function(){O()});b.addEventListener("click",function(){O()});v.addEventListener("click",function(){O()});y.addEventListener("click",function(){if(L(e.value)){C()}else{p.textContent="Ingresa tu correo para descargar la guía";e.focus()}});w.addEventListener("click",function(){if(L(e.value)){C()}else{p.textContent="Ingresa tu correo para descargar la guía";e.scrollIntoView({behavior:"smooth",block:"center"});e.focus()}});t.addEventListener("submit",function(t){t.preventDefault();E();if(!n.value||!L(e.value)||!i.value){p.textContent="Completa nombre, email y tipo de cliente";return}var s={nombre:n.value,email:e.value,telefono:a.value||null,tipoCliente:i.value,municipio:o.value||null,servicio:r.value||null,metros:d.value||null,acabado:l.value||null,presupuesto:c.value?parseInt(c.value,10):null,preferencia:u.value,ts:new Date().toISOString(),source:"landing"};try{localStorage.setItem("lead",JSON.stringify(s))}catch(t){}p.textContent="Gracias, recibimos tu solicitud";if(m.checked)C();if(u.value==="WhatsApp")O()})});

